# How Visualizations Appear in watsonx Orchestrate Chat

## ğŸ“± Visual Guide: What Users See

---

## **Scenario 1: User Asks for a Chart**

### User Input:
```
"Show me energy trends for the last 24 hours"
```

### What Happens Behind the Scenes:
1. PlantOPS main agent receives request
2. Routes to DataScout â†’ Get energy data
3. Routes to Visualizer â†’ Create trend chart
4. Returns formatted response

### What User Sees in Orchestrate Chat:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– PlantOPS                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ âœ… I've analyzed the energy trends!                â”‚
â”‚                                                     â”‚
â”‚ ğŸ“Š Energy & COâ‚‚ Trends (Last 24 Hours)             â”‚
â”‚                                                     â”‚
â”‚ View your interactive chart:                       â”‚
â”‚ ğŸ”— [Open Chart] â† Clickable link                   â”‚
â”‚                                                     â”‚
â”‚ This chart shows 2 data series (Energy kWh and     â”‚
â”‚ COâ‚‚ kg) across 24 time points.                     â”‚
â”‚                                                     â”‚
â”‚ Key insights:                                      â”‚
â”‚ â€¢ Peak energy: 10,687 kWh at 14:00                â”‚
â”‚ â€¢ Lowest: 10,521 kWh at 03:00                     â”‚
â”‚ â€¢ Average: 10,581 kWh                              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**When user clicks the link:**
â†’ Opens new tab with interactive Plotly chart
â†’ Can zoom, pan, hover for details
â†’ Can download as PNG

---

## **Scenario 2: Dashboard Request**

### User Input:
```
"Generate a sustainability dashboard for the paint shop"
```

### What User Sees:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– PlantOPS                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ ğŸ¯ Paint Shop Sustainability Dashboard             â”‚
â”‚                                                     â”‚
â”‚ âš¡ Total Energy: 30,125 kWh (â†‘ 5.2%)              â”‚
â”‚ ğŸŒ COâ‚‚ Emissions: 24,703 kg (â†“ 2.1%)              â”‚
â”‚ ğŸš— Production: 25 units (â†‘ 3.8%)                   â”‚
â”‚ ğŸ“Š Efficiency: 1,205 kWh/unit (â†“ 1.5%)            â”‚
â”‚                                                     â”‚
â”‚ âš ï¸ Alerts: 12 anomalies detected                   â”‚
â”‚                                                     â”‚
â”‚ ğŸ“ˆ View Full Dashboard:                            â”‚
â”‚ ğŸ”— [Open Interactive Dashboard]                    â”‚
â”‚                                                     â”‚
â”‚ Individual Charts:                                 â”‚
â”‚ â€¢ [Energy Trend Chart]                             â”‚
â”‚ â€¢ [Zone Comparison]                                â”‚
â”‚ â€¢ [Distribution Pie Chart]                         â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **Option 1: Chart URLs** (Current Implementation)

### How It Works:
```
User Request â†’ API â†’ Generate Chart â†’ QuickChart.io URL â†’ Return Link
```

### Pros:
âœ… Simple to implement
âœ… Works immediately
âœ… No special Orchestrate configuration
âœ… User clicks link â†’ Opens chart in browser

### Cons:
âŒ Not embedded in chat (external link)
âŒ Requires internet access
âŒ QuickChart has limits (free tier)

### Example Response:
```json
{
  "status": "success",
  "message": "âœ… I've created your Energy Trends chart!",
  "chart_url": "https://quickchart.io/chart?c={...}",
  "text_response": "ğŸ“Š **Energy Trends**\n\nView chart: https://quickchart.io/..."
}
```

---

## **Option 2: Embedded Rich Cards** (Better UX)

### How It Works:
Use watsonx Orchestrate's **Rich Response Cards**

### Configuration in Orchestrate:

1. **Go to Visualizer skill settings**
2. **Enable Rich Responses**
3. **Configure card template:**

```json
{
  "type": "card",
  "title": "{title}",
  "subtitle": "Generated by Visualizer Agent",
  "image": "{chart_url}",
  "buttons": [
    {
      "type": "openUrl",
      "title": "Open Interactive Chart",
      "url": "{chart_url}"
    },
    {
      "type": "openUrl",
      "title": "Download PNG",
      "url": "{chart_url}&format=png"
    }
  ]
}
```

### What User Sees:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Energy & COâ‚‚ Trends                              â”‚
â”‚ Generated by Visualizer Agent                      â”‚
â”‚                                                     â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚ â•‘                                               â•‘  â”‚
â”‚ â•‘      [Chart Preview Image]                    â•‘  â”‚
â”‚ â•‘                                               â•‘  â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                     â”‚
â”‚ [Open Interactive Chart] [Download PNG]            â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pros:
âœ… Chart preview visible in chat
âœ… Professional appearance
âœ… Action buttons for interaction

### Cons:
âš ï¸ Requires Orchestrate rich card setup
âš ï¸ Still uses external chart generation

---

## **Option 3: Data Tables + Sparklines** (Text-Only)

### How It Works:
Return formatted ASCII charts and data tables

### Example Response:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– PlantOPS                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ ğŸ“Š Energy Trends (Last 24 Hours)                    â”‚
â”‚                                                     â”‚
â”‚ âš¡ Energy (kWh):                                    â”‚
â”‚ â–â–‚â–ƒâ–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–ƒâ–„â–…â–†â–‡â–‡â–†â–…â–„â–ƒâ–‚â–  Min: 10,521  Max: 10,687 â”‚
â”‚                                                     â”‚
â”‚ ğŸŒ COâ‚‚ (kg):                                        â”‚
â”‚ â–â–‚â–ƒâ–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–ƒâ–„â–…â–†â–‡â–‡â–†â–…â–„â–ƒâ–‚â–  Min: 8,627   Max: 8,763  â”‚
â”‚                                                     â”‚
â”‚ Hour | Energy  | COâ‚‚    | Production              â”‚
â”‚ â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚ 00:00â”‚ 10,521  â”‚ 8,627  â”‚ 8 units                 â”‚
â”‚ 01:00â”‚ 10,543  â”‚ 8,645  â”‚ 9 units                 â”‚
â”‚ 02:00â”‚ 10,578  â”‚ 8,674  â”‚ 9 units                 â”‚
â”‚ ...  â”‚ ...     â”‚ ...    â”‚ ...                     â”‚
â”‚                                                     â”‚
â”‚ ğŸ”— View interactive chart: [Link]                  â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pros:
âœ… Works entirely in chat (no external links needed)
âœ… Quick to scan
âœ… Good for simple data

### Cons:
âŒ Not as visually appealing
âŒ Limited to simple charts
âŒ Can't interact (zoom, pan)

---

## **Recommended Approach for Your Hackathon:**

### **Use a Hybrid: Option 1 + Option 2**

1. **Return chart URL** (always)
2. **Add QuickChart.io image preview** (for cards)
3. **Include text summary** (for quick insights)

### Updated API Response Format:

```json
{
  "status": "success",
  "message": "âœ… I've created your Energy Trends chart!",
  "chart_url": "https://quickchart.io/chart?c={...}",
  "chart_image_url": "https://quickchart.io/chart?c={...}&format=png",
  "summary": {
    "series_count": 2,
    "time_points": 24,
    "insights": [
      "Peak energy: 10,687 kWh at 14:00",
      "Lowest: 10,521 kWh at 03:00",
      "Average: 10,581 kWh"
    ]
  },
  "text_response": "ğŸ“Š **Energy & COâ‚‚ Trends (Last 24 Hours)**\n\nâœ… Chart created successfully!\n\nğŸ”— View chart: [Link]\n\n**Key Insights:**\nâ€¢ Peak energy: 10,687 kWh at 14:00\nâ€¢ Lowest: 10,521 kWh at 03:00\nâ€¢ Average: 10,581 kWh"
}
```

### In Orchestrate, Configure Response Template:

```
{text_response}

[Open Interactive Chart]({chart_url})

Chart Preview:
![Chart]({chart_image_url})
```

---

## **Demo Flow for Judges:**

### **Step 1: Show Chat Interaction**
```
User: "Show me energy trends"
PlantOPS: "âœ… I've created your chart! [View Link]"
```

### **Step 2: Click Link**
â†’ Opens beautiful Plotly chart in new tab
â†’ Show interaction: zoom, pan, hover

### **Step 3: Show Dashboard**
```
User: "Generate a sustainability dashboard"
PlantOPS: Returns KPIs + 3 chart links
```

### **Step 4: Open Dashboard HTML**
â†’ Show the dashboard.html file
â†’ "This is what the charts look like when embedded"

### **Step 5: Explain Value**
```
"watsonx Orchestrate chat provides quick links,
and users can view interactive charts in their browser.
For enterprise deployments, these can be embedded
in web portals or mobile apps."
```

---

## **Quick Setup for Demo:**

### 1. Update your Visualizer endpoint:
Already done! Now supports `?format=chat` parameter

### 2. Test it:
```bash
curl -X POST "http://localhost:8000/visualizer/trend-chart?format=chat" \
  -H "Content-Type: application/json" \
  -d '{
    "timestamps": ["2025-11-01", "2025-11-02"],
    "series": [{"name": "Energy", "data": [10500, 10600]}],
    "title": "Energy Trends"
  }'
```

### 3. In Orchestrate:
- Set skill URL: `/visualizer/trend-chart?format=chat`
- Response will include clickable chart link
- Perfect for chat interface!

---

## **Visual Examples:**

### watsonx Orchestrate Chat (Text):
```
User: Show energy chart
Bot: âœ… Chart created! View here: [Link]
```

### Browser (When Link Clicked):
```
[Beautiful Interactive Plotly Chart]
- Hover for values
- Zoom in/out
- Pan around
- Download PNG
```

### Your Dashboard HTML:
```
[Full Dashboard Page]
- KPI Cards
- Multiple charts
- Auto-refresh
- Professional UI
```

---

## **Bottom Line:**

**watsonx Orchestrate chat = Text + Links**
**Clicking links = Interactive charts in browser**
**Your dashboard.html = Full visual experience**

For the hackathon, this is **perfect** because:
âœ… Shows AI orchestration (chat)
âœ… Shows data visualization (charts)
âœ… Shows watsonx integration
âœ… Professional demo flow

The judges will see BOTH the conversational AI AND the visual output! ğŸ¯
